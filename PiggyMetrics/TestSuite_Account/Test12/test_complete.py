import requests
import json
import time
import re
import sys
from bson.json_util import loads
import os.path


headers={'Content-type': 'application/json', 'Accept': 'application/json'}

print('sending post request to http://localhost:6000/accounts/')
json_content = {"username":"UtenteCon21_caratteri","password":"password"}
response = requests.post('http://localhost:6000/accounts/', data=json.dumps(json_content), headers=headers)
print('response: {0}'.format(response.content))
if response.status_code == 201:
	print('created')

assert response.status_code == 400

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"timestamp":"2019-02-03T16:25:42.384+0000","status":400,"error":"Bad Request","errors":[{"codes":["Length.user.username","Length.username","Length.java.lang.String","Length"],"arguments":[{"codes":["user.username","username"],"arguments":null,"defaultMessage":"username","code":"username"},20,3],"defaultMessage":"length must be between 3 and 20","objectName":"user","field":"username","rejectedValue":"UtenteCon21_caratteri","bindingFailure":false,"code":"Length"}],"message":"Validation failed for object=\'user\'. Error count: 1","path":"/accounts/"}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

headers={'Content-type': 'application/json', 'Accept': 'application/json'}

print('sending post request to http://localhost:6000/accounts/')
json_content = {"username":"TestLimite3","password":"pass5"}
response = requests.post('http://localhost:6000/accounts/', data=json.dumps(json_content), headers=headers)
print('response: {0}'.format(response.content))
if response.status_code == 201:
	print('created')

assert response.status_code == 400

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"timestamp":"2019-02-03T16:26:12.298+0000","status":400,"error":"Bad Request","errors":[{"codes":["Length.user.password","Length.password","Length.java.lang.String","Length"],"arguments":[{"codes":["user.password","password"],"arguments":null,"defaultMessage":"password","code":"password"},40,6],"defaultMessage":"length must be between 6 and 40","objectName":"user","field":"password","rejectedValue":"pass5","bindingFailure":false,"code":"Length"}],"message":"Validation failed for object=\'user\'. Error count: 1","path":"/accounts/"}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

headers={'Content-type': 'application/json', 'Accept': 'application/json'}

print('sending post request to http://localhost:6000/accounts/')
json_content = {"username":"TestLimite4","password":"password_con_quaranta_caratteri_per_test2"}
response = requests.post('http://localhost:6000/accounts/', data=json.dumps(json_content), headers=headers)
print('response: {0}'.format(response.content))
if response.status_code == 201:
	print('created')

assert response.status_code == 400

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"timestamp":"2019-02-03T16:26:25.666+0000","status":400,"error":"Bad Request","errors":[{"codes":["Length.user.password","Length.password","Length.java.lang.String","Length"],"arguments":[{"codes":["user.password","password"],"arguments":null,"defaultMessage":"password","code":"password"},40,6],"defaultMessage":"length must be between 6 and 40","objectName":"user","field":"password","rejectedValue":"password_con_quaranta_caratteri_per_test2","bindingFailure":false,"code":"Length"}],"message":"Validation failed for object=\'user\'. Error count: 1","path":"/accounts/"}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

headers={'Content-type': 'application/json', 'Accept': 'application/json'}

print('sending post request to http://localhost:6000/accounts/')
json_content = {"username":"TestLimite2","password":"password_con_quaranta_caratteri_per_test"}
response = requests.post('http://localhost:6000/accounts/', data=json.dumps(json_content), headers=headers)
print('response: {0}'.format(response.content))
if response.status_code == 201:
	print('created')

assert response.status_code == 200

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"name":"TestLimite2","lastSeen":"2019-02-03T16:27:52.912+0000","incomes":null,"expenses":null,"saving":{"amount":0,"currency":"USD","interest":0,"deposit":false,"capitalization":false},"note":null}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

headers={'Content-type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer 71563090-b1b5-44e2-ac80-149be9c9a27e'}

data = {}
data = json.loads('{"name":"TestLimite4","lastSeen":"2018-12-14T08:51:43.294+0000","incomes":[{"title":"Salary","amount":30000.0,"currency":"USD","period":"YEAR","icon":"wallet"},{"title":"Scholarship","amount":500.0,"currency":"USD","period":"MONTH","icon":"edu"}],"expenses":[{"title":"Rent","amount":500.0,"currency":"USD","period":"MONTH","icon":"home"},{"title":"Utilities","amount":200.0,"currency":"USD","period":"MONTH","icon":"utilities"},{"title":"Meal","amount":100.0,"currency":"USD","period":"DAY","icon":"meal"},{"title":"Gas","amount":60.0,"currency":"USD","period":"MONTH","icon":"gas"},{"title":"Vacation","amount":1000.0,"currency":"EUR","period":"YEAR","icon":"island"},{"title":"Phone","amount":10.0,"currency":"EUR","period":"MONTH","icon":"phone"}],"saving":{"amount":2000.0,"currency":"USD","interest":3.32,"deposit":true,"capitalization":false},"note":"NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVenti1"}')
print('sending put request to http://localhost:6000/accounts/current')
response = requests.put('http://localhost:6000/accounts/current', data = json.dumps(data), headers=headers)
print('response: {0}'.format(response.content))

assert response.status_code == 400

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"timestamp":"2019-02-03T16:28:45.299+0000","status":400,"error":"Bad Request","errors":[{"codes":["Length.account.note","Length.note","Length.java.lang.String","Length"],"arguments":[{"codes":["account.note","note"],"arguments":null,"defaultMessage":"note","code":"note"},20000,0],"defaultMessage":"length must be between 0 and 20000","objectName":"account","field":"note","rejectedValue":"NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentiNoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVentimilaCaratteri_NoteConVenti1","bindingFailure":false,"code":"Length"}],"message":"Validation failed for object=\'account\'. Error count: 1","path":"/accounts/current"}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

headers={'Content-type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer 71563090-b1b5-44e2-ac80-149be9c9a27e'}

data = {}
data = json.loads('{"name":"TestLimite3","lastSeen":"2018-12-14T08:51:43.294+0000","incomes":[{"title":"Salary","amount":30000.0,"currency":"USD","period":"YEAR","icon":"wallet"},{"title":"Scholarship","amount":500.0,"currency":"USD","period":"MONTH","icon":"edu"}],"expenses":[{"title":"","amount":500.0,"currency":"USD","period":"MONTH","icon":"home"},{"title":"Utilities","amount":200.0,"currency":"USD","period":"MONTH","icon":"utilities"},{"title":"Meal","amount":100.0,"currency":"USD","period":"DAY","icon":"meal"},{"title":"Gas","amount":60.0,"currency":"USD","period":"MONTH","icon":"gas"},{"title":"Vacation","amount":1000.0,"currency":"EUR","period":"YEAR","icon":"island"},{"title":"Phone","amount":10.0,"currency":"EUR","period":"MONTH","icon":"phone"}],"saving":{"amount":2000.0,"currency":"USD","interest":3.32,"deposit":true,"capitalization":false},"note":"Prova di test 1.0"}')
print('sending put request to http://localhost:6000/accounts/current')
response = requests.put('http://localhost:6000/accounts/current', data = json.dumps(data), headers=headers)
print('response: {0}'.format(response.content))

assert response.status_code == 400

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"timestamp":"2019-02-03T16:29:39.137+0000","status":400,"error":"Bad Request","errors":[{"codes":["Length.account.expenses[0].title","Length.account.expenses.title","Length.expenses[0].title","Length.expenses.title","Length.title","Length.java.lang.String","Length"],"arguments":[{"codes":["account.expenses[0].title","expenses[0].title"],"arguments":null,"defaultMessage":"expenses[0].title","code":"expenses[0].title"},20,1],"defaultMessage":"length must be between 1 and 20","objectName":"account","field":"expenses[0].title","rejectedValue":"","bindingFailure":false,"code":"Length"}],"message":"Validation failed for object=\'account\'. Error count: 1","path":"/accounts/current"}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

headers={'Content-type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer 71563090-b1b5-44e2-ac80-149be9c9a27e'}

data = {}
data = json.loads('{"name":"TestLimite3","lastSeen":"2018-12-14T08:51:43.294+0000","incomes":[{"title":"Salary","amount":30000.0,"currency":"USD","period":"YEAR","icon":"wallet"},{"title":"Scholarship","amount":500.0,"currency":"USD","period":"MONTH","icon":"edu"}],"expenses":[{"title":"Rent_WithTwentyChars1","amount":500.0,"currency":"USD","period":"MONTH","icon":"home"},{"title":"Utilities","amount":200.0,"currency":"USD","period":"MONTH","icon":"utilities"},{"title":"Meal","amount":100.0,"currency":"USD","period":"DAY","icon":"meal"},{"title":"Gas","amount":60.0,"currency":"USD","period":"MONTH","icon":"gas"},{"title":"Vacation","amount":1000.0,"currency":"EUR","period":"YEAR","icon":"island"},{"title":"Phone","amount":10.0,"currency":"EUR","period":"MONTH","icon":"phone"}],"saving":{"amount":2000.0,"currency":"USD","interest":3.32,"deposit":true,"capitalization":false},"note":"Prova di test 1.0"}')
print('sending put request to http://localhost:6000/accounts/current')
response = requests.put('http://localhost:6000/accounts/current', data = json.dumps(data), headers=headers)
print('response: {0}'.format(response.content))

assert response.status_code == 400

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"timestamp":"2019-02-03T16:29:51.184+0000","status":400,"error":"Bad Request","errors":[{"codes":["Length.account.expenses[0].title","Length.account.expenses.title","Length.expenses[0].title","Length.expenses.title","Length.title","Length.java.lang.String","Length"],"arguments":[{"codes":["account.expenses[0].title","expenses[0].title"],"arguments":null,"defaultMessage":"expenses[0].title","code":"expenses[0].title"},20,1],"defaultMessage":"length must be between 1 and 20","objectName":"account","field":"expenses[0].title","rejectedValue":"Rent_WithTwentyChars1","bindingFailure":false,"code":"Length"}],"message":"Validation failed for object=\'account\'. Error count: 1","path":"/accounts/current"}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

headers={'Content-type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer 71563090-b1b5-44e2-ac80-149be9c9a27e'}

data = {}
data = json.loads('{"name":"TestLimite3","lastSeen":"2018-12-14T08:51:43.294+0000","incomes":[{"title":"","amount":30000.0,"currency":"USD","period":"YEAR","icon":"wallet"},{"title":"Scholarship","amount":500.0,"currency":"USD","period":"MONTH","icon":"edu"}],"expenses":[{"title":"Rent","amount":500.0,"currency":"USD","period":"MONTH","icon":"home"},{"title":"Utilities","amount":200.0,"currency":"USD","period":"MONTH","icon":"utilities"},{"title":"Meal","amount":100.0,"currency":"USD","period":"DAY","icon":"meal"},{"title":"Gas","amount":60.0,"currency":"USD","period":"MONTH","icon":"gas"},{"title":"Vacation","amount":1000.0,"currency":"EUR","period":"YEAR","icon":"island"},{"title":"Phone","amount":10.0,"currency":"EUR","period":"MONTH","icon":"phone"}],"saving":{"amount":2000.0,"currency":"USD","interest":3.32,"deposit":true,"capitalization":false},"note":"Prova di test 1.0"}')
print('sending put request to http://localhost:6000/accounts/current')
response = requests.put('http://localhost:6000/accounts/current', data = json.dumps(data), headers=headers)
print('response: {0}'.format(response.content))

assert response.status_code == 400

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"timestamp":"2019-02-03T16:30:18.076+0000","status":400,"error":"Bad Request","errors":[{"codes":["Length.account.incomes[0].title","Length.account.incomes.title","Length.incomes[0].title","Length.incomes.title","Length.title","Length.java.lang.String","Length"],"arguments":[{"codes":["account.incomes[0].title","incomes[0].title"],"arguments":null,"defaultMessage":"incomes[0].title","code":"incomes[0].title"},20,1],"defaultMessage":"length must be between 1 and 20","objectName":"account","field":"incomes[0].title","rejectedValue":"","bindingFailure":false,"code":"Length"}],"message":"Validation failed for object=\'account\'. Error count: 1","path":"/accounts/current"}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

headers={'Content-type': 'application/json', 'Accept': 'application/json', 'Authorization': 'Bearer 71563090-b1b5-44e2-ac80-149be9c9a27e'}

data = {}
data = json.loads('{"name":"TestLimite3","lastSeen":"2018-12-14T08:51:43.294+0000","incomes":[{"title":"SalaryWithTwentyChar1","amount":30000.0,"currency":"USD","period":"YEAR","icon":"wallet"},{"title":"Scholarship","amount":500.0,"currency":"USD","period":"MONTH","icon":"edu"}],"expenses":[{"title":"Rent","amount":500.0,"currency":"USD","period":"MONTH","icon":"home"},{"title":"Utilities","amount":200.0,"currency":"USD","period":"MONTH","icon":"utilities"},{"title":"Meal","amount":100.0,"currency":"USD","period":"DAY","icon":"meal"},{"title":"Gas","amount":60.0,"currency":"USD","period":"MONTH","icon":"gas"},{"title":"Vacation","amount":1000.0,"currency":"EUR","period":"YEAR","icon":"island"},{"title":"Phone","amount":10.0,"currency":"EUR","period":"MONTH","icon":"phone"}],"saving":{"amount":2000.0,"currency":"USD","interest":3.32,"deposit":true,"capitalization":false},"note":"Prova di test 1.0"}')
print('sending put request to http://localhost:6000/accounts/current')
response = requests.put('http://localhost:6000/accounts/current', data = json.dumps(data), headers=headers)
print('response: {0}'.format(response.content))

assert response.status_code == 400

content = re.sub(r'"id".*?(?=,)', '"id":null',response.content.decode('utf-8'))
content = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null',content)
content = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null',content)
content = re.sub(r'"date".*?(?=,)', '"date":null',content)
data_cont = loads(content)
packet_data = '{"timestamp":"2019-02-03T16:30:41.111+0000","status":400,"error":"Bad Request","errors":[{"codes":["Length.account.incomes[0].title","Length.account.incomes.title","Length.incomes[0].title","Length.incomes.title","Length.title","Length.java.lang.String","Length"],"arguments":[{"codes":["account.incomes[0].title","incomes[0].title"],"arguments":null,"defaultMessage":"incomes[0].title","code":"incomes[0].title"},20,1],"defaultMessage":"length must be between 1 and 20","objectName":"account","field":"incomes[0].title","rejectedValue":"SalaryWithTwentyChar1","bindingFailure":false,"code":"Length"}],"message":"Validation failed for object=\'account\'. Error count: 1","path":"/accounts/current"}'
packet_data = re.sub(r'"timestamp".*?(?=,)', '"timestamp":null', packet_data)
packet_data = re.sub(r'"lastSeen".*?(?=,)', '"lastSeen":null', packet_data)
packet_data = re.sub(r'"date".*?(?=,)', '"date":null', packet_data)
data_pkt = loads(packet_data)
assert data_cont == data_pkt

